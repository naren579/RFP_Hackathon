Example: Storing an ACL for an object

Hereâ€™s a sample HTTP PUT request that stores the ACL defined in the

Q1_2012.acl.xml file for an existing object named Q1_2012.ppt. Request with curl command line

curl -k -H "Authorization: HCP bXl1c2Vy:3f3c6784e97531774380db177774ac8d" -iT Q1_2012.acl.xml -H "Content-Type: application/xml"

"https://finance.europe.hcp.example.com/rest/quarterly_rpts/ Q1_2012.ppt?type=acl"

https://docs.hitachivantara.com/internal/api/webapp/print/72cda581-a515-4975-93dd-f591140b46a3

776/907

6/25/24, 11:34 AM

Content Platform System Management Help

Request in Python using PycURL

import pycurl

import os filehandle = open("Q1_2012.acl.xml", 'rb') curl = pycurl.Curl()

curl.setopt(pycurl.HTTPHEADER, ["Authorization: HCP bXl1c2Vy:3f3c6784e97531774380db177774ac8d"])

curl.setopt(pycurl.URL, "https://finance.europe.hcp.example.com \ /rest/quarterly_rpts/Q1_2012.ppt?type=acl")

curl.setopt(pycurl.SSL_VERIFYPEER, 0) curl.setopt(pycurl.SSL_VERIFYHOST, 0) curl.setopt(pycurl.UPLOAD, 1) curl.setopt(pycurl.INFILESIZE, os.path.getsize("Q1_2012.acl.xml"))

curl.setopt(pycurl.READFUNCTION, filehandle.read) curl.perform()

print curl.getinfo(pycurl.RESPONSE_CODE) curl.close()

filehandle.close()

Request headers

PUT /rest/quarterly_rpts/Q1_2012.ppt?type=acl HTTP/1.1 Host: finance.europe.hcp.example.com Authorization: HCP bXl1c2Vy:3f3c6784e97531774380db177774ac8d

Content-Length: 246

Response headers

HTTP/1.1 201 Created

X-HCP-ServicedBySystem: hcp.example.com Location: /rest/quarterly_rpts/Q1_2012.ppt

X-HCP-Time: 1334772280 Content-Length: 0

Checking the existence of an ACL

You use the HTTP HEAD method to check whether an object or version of an object has an ACL. Access permission

To check for the existence of an ACL, you need read ACL permission.

Request headers

HEAD /rest/directory/file?type=acl HTTP/1.1

Parameter

Required

Description

directory

Yes

Folder name.

file

Yes

Name of the file, including file extension.

type

Yes

Use the value acl.

version No

One of:

Specific version number of the file. For example:

?version=80232998058817

Range of version IDs, separated by a dash. For example:

?version=91728994618369-91728994618372

Range of create timestamps, separated by a dash. For example:

?version=@1493911519817-@1493911519817

0-, which provides all versions of an object.

These rules apply to the version query parameter:

If you omit the parameter, HCP checks the existence of the current version of an object. If you specify a valid range, HCP returns the requested amount of data with a status code of 200. Response headers

The list below describes the request-specific response headers for this operation.

Content-Type