The XML has a large number of different elements and attributes. In this case, the request returns an HTTP 400 (Bad Request) error code.

To prevent failures, try restructuring the XML to have fewer different elements and attributes. For example, try concatenating multiple element values, such as the different parts of an address, to create a new value for a single element.

If you cannot restructure the XML to prevent failures, ask your tenant administrator about reconfiguring the namespace to prevent HCP from checking custom metadata XML.

A large number of clients try to store custom metadata for multiple objects at the same time. In this case, the request returns an HTTP 409 (Conflict) error code.

To prevent failures, limit the number of concurrent requests from clients to the namespace. Request header

PUT /rest/directory/file?type=custom-metadata&annotation=annotation HTTP/1.1

Parameter

Required

Description

directory

Yes

Folder name.

file

Yes

Name of the file, including file extension.

annotation

No

Use a value of the name of the annotation. You can omit this parameter for the default annotation.Used in conjunction with the type parameter. type

Yes

Use the value custom-metadata.

Response headers

The list below describes the request-specific response headers for this operation.

X-HCP-Hash

The cryptographic hash algorithm HCP uses, along with the cryptographic hash value stored for the object, in this format:

X-HCP-Hash: hash-algorithmhash-value

https://docs.hitachivantara.com/internal/api/webapp/print/72cda581-a515-4975-93dd-f591140b46a3

767/907

6/25/24, 11:34 AM

Content Platform System Management Help

You can use the returned hash value to verify that the stored data is the same as the data you sent. To perform the verification, compare this value with a hash value that you generate from the original data.

The X-HCP-Hash

header is not returned for multipart objects.

Status codes

The table below describes the HTTP status codes that have specific meaning for this request.

Code

Meaning

Description

201

Created

HCP successfully stored the annotation.

400

Bad Request

One of:

The URL in the request is not well-formed. The namespace is configured with custom metadata XML checking enabled, and the request

included custom metadata that is not well-formed XML. The request has a Content-Encoding header that specifies gzip, but the annotation is not in gzip- compressed format. The request contains an unsupported query parameter or an invalid value for a query parameter.

The specified object has ten annotations, and the request is trying to add an annotation. The request contains an If-Match, If-None-Match, If-Modified-Since, or If-Unmodified-si nce header.

If more information about the error is available, the HTTP response headers include the HCP-specific X-HC P-ErrorMessage header.

403 Forbidden

One of:

The Authorization header or hcp-ns-auth cookie specifies invalid credentials. The namespace requires client authentication, and the request does not have an Authorization header or hcp-ns-auth cookie. The user doesnâ€™t have write permission. The object is under retention, and the namespace does not allow adding or replacing annotations for objects under retention.

The namespace does not exist. The access method (HTTP or HTTPS) is disabled.

If more information about the error is available, the response headers include the HCP-specific X-HCP-Err orMessage header.

404

Not Found

One of:

HCP could not find an object or version at the specified URL. The specified object or version does not exist, or the request specified the current version of an object that has been deleted.

Any component of the URL except for the last component in the path is a symbolic link to a directory.

413 File Too Large

The request is trying to store a non-default annotation that is larger than one MB or a default annotation

that is larger than one GB. The maximum size of the default annotation is one GB, and the maximum size for all other annotations is one MB

415

Unsupported Media Type