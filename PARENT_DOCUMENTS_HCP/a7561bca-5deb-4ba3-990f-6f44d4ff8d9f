algorithm, and cryptographic hash value generated by that algorithm. It also includes metadata that was either inherited or specified in the write request, such as retention setting, UID, and GID.

2. HCP creates the number of additional copies of the primary metadata required to satisfy the ingest tier metadata protection level (MPL) that’s set for the namespace by its

service plan. HCP then distributes all copies of the primary metadata among the HCP storage nodes.

3. HCP creates the number of copies of the object data required to satisfy the ingest tier data protection level (DPL) that’s set for the namespace by its service plan. HCP then

distributes all copies of the object data either among the HCP storage nodes or HCP S Series Nodes, depending on the ingest tier.

Each copy of the primary metadata for the object points to all copies of the object data. However, the object data is not necessarily stored on the same node as the primary metadata for the object.

4. HCP stores a copy of the metadata with each copy of the object data. Each copy, called the secondary metadata, lets HCP reconstruct the primary metadata should that become necessary.

Object content stored on different types of storage

When the Storage Tiering service moves an object off the ingest tier and onto another storage tier, the service removes all copies of the object data from the ingest tier and stores the specified number of copies of the object data on the new storage tier. However, at least one copy of the object metadata must always remain on primary running storage. For

each storage tier that’s defined for a given namespace, the service plan specifies the number of copies of object data that must be stored on the tier and the number of copies of object metadata that must be stored on primary running storage.

For each object in a given namespace, the Storage Tiering service always moves copies of the data for that object among the storage tiers that are defined for the namespace by its service plan. However, the Storage Tiering service does not move all of the other content for an object to each storage tier that’s defined for a namespace.

For each copy of an object that’s stored on primary spindown storage, only the data, custom metadata, ACL, and secondary metadata for that object are actually stored on primary

spindown storage. All copies of the primary metadata for an object must always remain on primary running storage. Note:

Objects moved from primary running storage to primary spindown storage are always kept on the same storage node.

For each copy of an object that’s moved to S Series or extended storage, only the data for that object is actually stored on primary running storage. All copies of the object metadata must always remain on primary running storage.

Storage allocation for objects on an HCP S Series or extended storage tier

Each HCP S Series or extended storage tier can be configured to use one or more storage pools. Each storage pool can be configured to include one or more access points (mount points, buckets, or containers) that can be associated with one or more storage components. If a service plan defines an HCP S Series or extended storage tier that contains more than one storage pool and the DPL for that storage tier is greater than one, HCP uses different storage pools to store duplicate copies of the data for each object on that tier. Similarly, if a storage pool that’s used for a given storage tier contains more than one HCP S Series or

extended storage component access point, HCP uses the storage that’s associated with different access points to store any duplicate copies of object data that are stored on the tier that contains the storage pool.

When HCP stores a single copy for each object on a given HCP S Series or extended storage tier, HCP still distributes the object data storage evenly across all of the storage component access points contained in all storage pools configured for a given HCP S Series or extended storage tier. This ensures that data that’s stored on a given tier is protected as much as possible and the storage that’s used for a given tier is allocated as efficiently as possible.

Service plans and read requests

When creating service plans, you should keep in mind how HCP handles read requests.

In response to a read request, HCP tries to retrieve the data for an object from these sources, in the order specified below:

https://docs.hitachivantara.com/internal/api/webapp/print/72cda581-a515-4975-93dd-f591140b46a3

61/907