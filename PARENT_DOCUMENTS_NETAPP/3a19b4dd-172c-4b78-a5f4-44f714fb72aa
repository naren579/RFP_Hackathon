Conditions use key-value pairs for evaluation. A Condition element can contain multiple conditions, and each condition can contain multiple key-value pairs. The condition block uses the following format:

977 Condition: { condition_type: { condition_key: condition_values

In the following example, the IpAddress condition uses the SourceIp condition key.

"Condition": { "IpAddress": { "aws:SourceIp": "54.240.143.0/24" ... }, ...

Supported condition operators

Condition operators are categorized as follows:

String

Numeric

Boolean

IP address

Null check Condition operators

Description

StringEquals

Compares a key to a string value based on exact matching (case sensitive).

StringNotEquals

Compares a key to a string value based on negated matching (case sensitive).

StringEqualsIgnoreCase

Compares a key to a string value based on exact matching (ignores case). StringNotEqualsIgnoreCase

Compares a key to a string value based on negated matching (ignores case).

StringLike

Compares a key to a string value based on exact matching (case sensitive). Can include * and ? wildcard characters.

StringNotLike

Compares a key to a string value based on negated matching (case sensitive). Can include * and ? wildcard characters. NumericEquals

Compares a key to a numeric value based on exact matching.

978

Condition operators

NumericNotEquals

NumericGreaterThan

NumericGreaterThanEquals

NumericLessThan

NumericLessThanEquals

Bool

IpAddress

NotIpAddress

Null

Supported condition keys Supported condition operators

Condition operators are categorized as follows:

String

Numeric

Boolean

IP address

Null check Condition operators

Description

StringEquals

Compares a key to a string value based on exact matching (case sensitive).

StringNotEquals

Compares a key to a string value based on negated matching (case sensitive).

StringEqualsIgnoreCase

Compares a key to a string value based on exact matching (ignores case). StringNotEqualsIgnoreCase

Compares a key to a string value based on negated matching (ignores case).

StringLike

Compares a key to a string value based on exact matching (case sensitive). Can include * and ? wildcard characters.

StringNotLike

Compares a key to a string value based on negated matching (case sensitive). Can include * and ? wildcard characters. NumericEquals

Compares a key to a numeric value based on exact matching.

978

Condition operators

NumericNotEquals

NumericGreaterThan

NumericGreaterThanEquals

NumericLessThan

NumericLessThanEquals

Bool

IpAddress

NotIpAddress

Null

Supported condition keys

Condition keys

aws:SourceIp

aws:username s3:delimiter

Description

Compares a key to a numeric value based on negated matching.

Compares a key to a numeric value based on "greater than" matching.

Compares a key to a numeric value based on "greater than or equals" matching.

Compares a key to a numeric value based on "less than" matching.

Compares a key to a numeric value based on "less than or equals" matching.

Compares a key to a Boolean value based on "true or false" matching.

Compares a key to an IP address or range of IP addresses.

Compares a key to an IP address or range of IP addresses based on negated matching.

Checks if a condition key is present in the current request context. Actions

Description

IP operators

Will compare to the IP address from which the request was sent. Can be used for bucket or object operations.

Note: If the S3 request was sent through the Load Balancer service on Admin Nodes and Gateways Nodes, this will compare to the IP address upstream of the Load Balancer service.

Note: If a third-party, non-transparent load balancer is used, this will compare to the IP address of that load balancer. Any X-Forwarded-For header will be ignored because its validity can’t be ascertained. Resource/Identity

Will compare to the sender’s username from which the request was sent. Can be used for bucket or object operations.

s3:ListBucket and

Will compare to the delimiter parameter specified in a ListObjects or ListObjectVersions request.

s3:ListBucketVersions permissions

979

Condition keys s3:ExistingObjectTag/<tag -key>

s3:max-keys

s3:object-lock-remaining- retention-days

s3:object-lock-remaining- retention-days

s3:prefix

980

Actions

s3:DeleteObjectTagging

s3:DeleteObjectVersionTa gging

s3:GetObject

s3:GetObjectAcl

3:GetObjectTagging

s3:GetObjectVersion

s3:GetObjectVersionAcl

s3:GetObjectVersionTagg ing s3:PutObjectAcl

s3:PutObjectTagging

s3:PutObjectVersionAcl

s3:PutObjectVersionTaggi ng

s3:ListBucket and

s3:ListBucketVersions permissions

s3:PutObject

s3:PutObjectRetention

s3:ListBucket and s3:ListBucketVersions permissions

Description

Will require that the existing object has the specific tag key and value.

Will compare to the max-keys parameter specified in a ListObjects or ListObjectVersions request. s3:ListBucketVersions permissions

979

Condition keys s3:ExistingObjectTag/<tag -key>

s3:max-keys