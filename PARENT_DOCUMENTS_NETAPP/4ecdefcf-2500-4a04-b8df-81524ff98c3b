The template file and manifest file for an Archive Node. vsphere-archive.mf You have downloaded and extracted the correct version of the StorageGRID installation archive for VMware.

If you are deploying the new node as part of an expansion or recovery operation, you must use the version of StorageGRID that is currently running on the grid.

You have the StorageGRID Virtual Machine Disk (.vmdk) file: NetApp-SG-version-SHA.vmdk

You have the .ovf and .mf files for each type of grid node you are deploying:

Filename

Description

vsphere-primary-admin.ovf

The template file and manifest file for the primary Admin Node.

vsphere-primary-admin.mf

vsphere-non-primary-admin.ovf

The template file and manifest file for a non-primary Admin Node. vsphere-non-primary-admin.mf

vsphere-storage.ovf

The template file and manifest file for a Storage Node.

vsphere-storage.mf

vsphere-gateway.ovf

The template file and manifest file for a Gateway Node.

vsphere-gateway.mf

vsphere-archive.ovf

The template file and manifest file for an Archive Node. vsphere-archive.mf

The .vdmk, .ovf, and .mf files are all in the same directory.

You have a plan to minimize failure domains. For example, you should not deploy all Gateway Nodes on a single virtual machine server.

In a production deployment, don’t run more than one Storage Node on a single virtual machine server. Using a dedicated virtual machine host for each Storage Node provides an isolated failure domain.

If you are deploying a node as part of an expansion or recovery operation, you have the instructions for expanding a StorageGRID system or the recovery and maintenance instructions.

227

• If you are deploying a StorageGRID node as a virtual machine with storage assigned from a NetApp ONTAP system, you have confirmed that the volume does not have a FabricPool tiering policy enabled. For example, if a StorageGRID node is running as an virtual machine on a VMware host, ensure the volume backing the datastore for the node does not have a FabricPool tiering policy enabled. Disabling FabricPool tiering for volumes used with StorageGRID nodes simplifies troubleshooting and storage operations.

Never use FabricPool to tier any data related to StorageGRID back to StorageGRID itself. Tiering StorageGRID data back to StorageGRID increases troubleshooting and operational complexity. About this task

Follow these instructions to initially deploy VMware nodes, add a new VMware node in an expansion, or replace a VMware node as part of a recovery operation. Except as noted in the steps, the node deployment procedure is the same for all node types, including Admin Nodes, Storage Nodes, Gateway Nodes, and Archive Nodes.

If you are installing a new StorageGRID system:

You must deploy the primary Admin Node before you deploy any other grid node.

You must ensure that each virtual machine can connect to the primary Admin Node over the Grid Network.

You must deploy all grid nodes before configuring the grid.

If you are performing an expansion or recovery operation:

You must ensure that the new virtual machine can connect to the primary Admin Node over the Grid Network.

If you need to remap any of the node’s ports, don’t power on the new node until the port remap configuration is complete. Steps

1. Using VCenter, deploy an OVF template.

If you specify a URL, point to a folder containing the following files. Otherwise, select each of these files from a local directory.

NetApp-SG-version-SHA.vmdk vsphere-node.ovf vsphere-node.mf

For example, if this is the first node you are deploying, use these files to deploy the primary Admin Node for your StorageGRID system: NetApp-SG-version-SHA.vmdk vsphere-primary-admin.ovf vsphere-primary-admin.mf

2. Provide a name for the virtual machine.

228

The standard practice is to use the same name for both the virtual machine and the grid node.

3. Place the virtual machine in the appropriate vApp or resource pool.

4. If you are deploying the primary Admin Node, read and accept the End User License Agreement. You must deploy all grid nodes before configuring the grid.

If you are performing an expansion or recovery operation:

You must ensure that the new virtual machine can connect to the primary Admin Node over the Grid Network.

If you need to remap any of the node’s ports, don’t power on the new node until the port remap configuration is complete. Steps

1. Using VCenter, deploy an OVF template.

If you specify a URL, point to a folder containing the following files. Otherwise, select each of these files from a local directory.

NetApp-SG-version-SHA.vmdk vsphere-node.ovf vsphere-node.mf

For example, if this is the first node you are deploying, use these files to deploy the primary Admin Node for your StorageGRID system: NetApp-SG-version-SHA.vmdk vsphere-primary-admin.ovf vsphere-primary-admin.mf

2. Provide a name for the virtual machine.

228