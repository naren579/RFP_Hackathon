Video: Information lifecycle management rules in StorageGRID 11.8.

Video: Information lifecycle management policies in StorageGRID 11.8 ILM and object lifecycle

How ILM operates throughout an object’s life

Understanding how StorageGRID uses ILM to manage objects during every stage of their life can help you design a more effective policy.

596

Ingest: Ingest begins when an S3 or Swift client application establishes a connection to save an object to the StorageGRID system, and is complete when StorageGRID returns an "ingest successful" message to the client. Object data is protected during ingest either by applying ILM instructions immediately (synchronous placement) or by creating interim copies and applying ILM later (dual commit), depending on how the ILM requirements were specified.

Copy management: After creating the number and type of object copies that are specified in the ILM’s placement instructions, StorageGRID manages object locations and protects objects against loss. ILM scanning and evaluation: StorageGRID continuously scans the list of objects stored in the grid and checks if the current copies meet ILM requirements. When different types, numbers, or locations of object copies are required, StorageGRID creates, deletes, or moves copies as needed.

Background verification: StorageGRID continuously performs background verification to check the integrity of object data. If a problem is found, StorageGRID automatically creates a new object copy or a replacement erasure-coded object fragment in a location that meets current ILM requirements. See Verify object integrity.

Object deletion: Management of an object ends when all copies are removed from the StorageGRID system. Objects can be removed as a result of a delete request by a client, or as a result of deletion by ILM or deletion caused by the expiration of an S3 bucket lifecycle. Objects in a bucket that has S3 Object Lock enabled can’t be deleted if they are under a legal hold or if a retain-until-date has been specified but not yet met.

The diagram summarizes how ILM operates throughout an object’s lifecycle.

597

How objects are ingested

Ingest options

When you create an ILM rule, you specify one of three options for protecting objects at ingest: Dual commit, Strict, or Balanced.

Depending on your choice, StorageGRID makes interim copies and queues the objects for ILM evaluation

598

later, or it uses synchronous placement and immediately makes copies to meet ILM requirements. Flowchart of ingest options

The flowchart shows what happens when objects are matched by an ILM rule that uses each of the three ingest options. Dual commit

When you select the Dual commit option, StorageGRID immediately makes interim object copies on two different Storage Nodes and returns an "ingest successful" message to the client. The object is queued for ILM evaluation, and copies that meet the rule’s placement instructions are made later. If the ILM policy can’t be processed immediately after the dual commit, site-loss protection could take time to achieve.

Use the Dual commit option in either of these cases:

You are using multi-site ILM rules and client ingest latency is your primary consideration. When using Dual

599

commit, you must ensure your grid can perform the additional work of creating and removing the dual- commit copies if they don’t satisfy ILM. Specifically:

The load on the grid must be low enough to prevent an ILM backlog. ◦ The grid must have excess hardware resources (IOPS, CPU, memory, network bandwidth, and so on). You are using multi-site ILM rules and the WAN connection between the sites usually has high latency or limited bandwidth. In this scenario, using the Dual commit option can help prevent client timeouts. Before choosing the Dual commit option, you should test the client application with realistic workloads. Balanced (default)

When you select the Balanced option, StorageGRID also uses synchronous placement on ingest and immediately makes all copies specified in the rule’s placement instructions. In contrast with the Strict option, if StorageGRID can’t immediately make all copies, it uses Dual commit instead. If the ILM policy uses placements on multiple sites and immediate site-loss protection can’t be achieved, the ILM placement unachievable alert is triggered.

Use the Balanced option to achieve the best combination of data protection, grid performance, and ingest success. Balanced is the default option in the Create ILM rule wizard. Strict You are using multi-site ILM rules and client ingest latency is your primary consideration. When using Dual

599

commit, you must ensure your grid can perform the additional work of creating and removing the dual- commit copies if they don’t satisfy ILM. Specifically: