VMware: Delete the deployed virtual grid node. Then, when you are ready to restart the recovery, redeploy the node.

Linux: Restart the node by running this command on the Linux host: storagegrid node force- recovery node-name Appliance: If you want to retry the recovery after resetting the procedure, you must restore the appliance node to a pre-installed state by running sgareinstall on the node. See Prepare appliance for reinstallation (platform replacement only).

Recover from Archive Node failures Recover from Archive Node failures: Workflow

You must complete a sequence of tasks in exact order to recover from an Archive Node failure.

1635

Archive Node recovery is affected by the following issues:

If the ILM policy is configured to replicate a single copy.

In a StorageGRID system that is configured to make a single copy of objects, an Archive Node failure might result in an unrecoverable loss of data. If there is a failure, all such objects are lost; however, you must still perform recovery procedures to "clean up" your StorageGRID system and purge lost object information from the database.

If an Archive Node failure occurs during Storage Node recovery.

If the Archive Node fails while processing bulk retrievals as part of a Storage Node recovery, you must repeat the procedure to recover copies of object data to the Storage Node from the beginning to ensure that all object data retrieved from the Archive Node is restored to the Storage Node. 1636

Replace Archive Node

To recover an Archive Node, you must first replace the node.

You must select the node replacement procedure for your platform. The steps to replace a node are the same for all types of grid nodes.

Platform

Procedure

VMware

Replace a VMware node

Linux

Replace a Linux node OpenStack

NetApp-provided virtual machine disk files and scripts for OpenStack are no longer supported for recovery operations. If you need to recover a node running in an OpenStack deployment, download the files for your Linux operating system. Then, follow the procedure for replacing a Linux node. Select Start Recovery to configure Archive Node

After replacing an Archive Node, you must select Start Recovery in the Grid Manager to configure the new node as a replacement for the failed node.

Before you begin

You are signed in to the Grid Manager using a supported web browser.

You have the Maintenance or Root access permission.

You have the provisioning passphrase.

You have deployed and configured the replacement node. Steps

1. From the Grid Manager, select MAINTENANCE > Tasks > Recovery.

2. Select the grid node you want to recover in the Pending Nodes list.

Nodes appear in the list after they fail, but you can’t select a node until it has been reinstalled and is ready for recovery.

3. Enter the Provisioning Passphrase.

4. Click Start Recovery.

1637

5. Monitor the progress of the recovery in the Recovering Grid Node table.

While the recovery procedure is running, you can click Reset to start a new recovery. A dialog box appears, indicating that the node will be left in an indeterminate state if you reset the procedure.

If you want to retry the recovery after resetting the procedure, you must restore the node to a pre-installed state, as follows: After replacing an Archive Node, you must select Start Recovery in the Grid Manager to configure the new node as a replacement for the failed node.

Before you begin

You are signed in to the Grid Manager using a supported web browser.

You have the Maintenance or Root access permission.

You have the provisioning passphrase.

You have deployed and configured the replacement node. Steps

1. From the Grid Manager, select MAINTENANCE > Tasks > Recovery.

2. Select the grid node you want to recover in the Pending Nodes list.

Nodes appear in the list after they fail, but you can’t select a node until it has been reinstalled and is ready for recovery.

3. Enter the Provisioning Passphrase.

4. Click Start Recovery.

1637

5. Monitor the progress of the recovery in the Recovering Grid Node table.

While the recovery procedure is running, you can click Reset to start a new recovery. A dialog box appears, indicating that the node will be left in an indeterminate state if you reset the procedure.

If you want to retry the recovery after resetting the procedure, you must restore the node to a pre-installed state, as follows:

VMware: Delete the deployed virtual grid node. Then, when you are ready to restart the recovery, redeploy the node.

Linux: Restart the node by running this command on the Linux host: storagegrid node force- recovery node-name 1638

Reset Archive Node connection to the cloud

After you recover an Archive Node that targets the cloud through the S3 API, you need to modify configuration settings to reset connections. An Outbound Replication Status (ORSU) alarm is triggered if the Archive Node is unable to retrieve object data.