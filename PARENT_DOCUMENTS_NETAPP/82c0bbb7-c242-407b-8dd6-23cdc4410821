Gather required materials for grid node recovery Before performing maintenance procedures, you must ensure you have the necessary materials to recover a failed grid node.

Item

Notes

StorageGRID installation archive

If you need to recover a grid node, you need to download the StorageGRID installation files for your platform.

Note: You don’t need to download files if you are recovering failed storage volumes on a Storage Node. Service laptop

The service laptop must have the following:

Network port

SSH client (for example, PuTTY)

Supported web browser

1547

Item

Notes Recovery Package .zip file

Obtain a copy of the most recent Recovery Package .zip file: sgws-recovery-package-id-revision.zip

The contents of the .zip file are updated each time the system is modified. You are directed to store the most recent version of the Recovery Package in a secure location after making such changes. Use the most recent copy to recover from grid failures.

If the primary Admin Node is operating normally, you can download the Recovery Package from the Grid Manager. Select MAINTENANCE > System > Recovery package.

If you can’t access the Grid Manager, you can find encrypted copies of the Recovery Package on some Storage Nodes that contain the ADC service. On each Storage Node, examine this location for the Recovery Package: /var/local/install/sgws-recovery-package-grid- id-revision.zip.gpg Use the Recovery Package with the highest revision number. Passwords.txt file

Contains the passwords required to access grid nodes on the command line. Included in the Recovery Package.

Provisioning passphrase

The passphrase is created and documented when the StorageGRID system is first installed. The provisioning passphrase is not in the Passwords.txt file. Current documentation for your platform

Go to the platform vendor’s website for documentation.

For the current supported versions of your platform, see the NetApp Interoperability Matrix Tool.

Download and extract StorageGRID installation files

Download the software and extract the files, unless you are recovering failed storage volumes on a Storage Node.

You must use the version of StorageGRID that is currently running on the grid. Steps

1. Determine which version of the software is currently installed. From the top of the Grid Manager, select the help icon and select About.

2. Go to the NetApp Downloads page for StorageGRID.

3. Select the version of StorageGRID that is currently running on the grid.

StorageGRID software versions have this format: 11.x.y.

4. Sign in with the username and password for your NetApp account.

1548

5. Read the End User License Agreement, select the checkbox, and then select Accept & Continue.

6. In the Install StorageGRID column of the download page, select the .tgz or .zip file for your platform.

The version shown in the installation archive file must match the version of the software that is currently installed.

Use the .zip file if you are running Windows. Platform

Installation archive

Red Hat Enterprise Linux

StorageGRID-Webscale-version-RPM-uniqueID.zip

StorageGRID-Webscale-version-RPM-uniqueID.tgz

Ubuntu or Debian or Appliances

StorageGRID-Webscale-version-DEB-uniqueID.zip

StorageGRID-Webscale-version-DEB-uniqueID.tgz

VMware

StorageGRID-Webscale-version-VMware-uniqueID.zip StorageGRID-Webscale-version-VMware-uniqueID.tgz

7. Download and extract the archive file.

8. Follow the appropriate step for your platform to choose the files you need, based on your platform and which grid nodes you need to recover.

The paths listed in the step for each platform are relative to the top-level directory installed by the archive file.

9. If you are recovering a Red Hat Enterprise Linux system, select the appropriate files. Path and file name

Description

./rpms/README 6. In the Install StorageGRID column of the download page, select the .tgz or .zip file for your platform.

The version shown in the installation archive file must match the version of the software that is currently installed.

Use the .zip file if you are running Windows. Platform

Installation archive

Red Hat Enterprise Linux

StorageGRID-Webscale-version-RPM-uniqueID.zip

StorageGRID-Webscale-version-RPM-uniqueID.tgz

Ubuntu or Debian or Appliances

StorageGRID-Webscale-version-DEB-uniqueID.zip

StorageGRID-Webscale-version-DEB-uniqueID.tgz

VMware

StorageGRID-Webscale-version-VMware-uniqueID.zip StorageGRID-Webscale-version-VMware-uniqueID.tgz

7. Download and extract the archive file.

8. Follow the appropriate step for your platform to choose the files you need, based on your platform and which grid nodes you need to recover.

The paths listed in the step for each platform are relative to the top-level directory installed by the archive file.

9. If you are recovering a Red Hat Enterprise Linux system, select the appropriate files. Path and file name

Description

./rpms/README