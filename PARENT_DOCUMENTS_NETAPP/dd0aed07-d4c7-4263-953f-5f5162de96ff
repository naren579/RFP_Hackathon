863

Type

Item name and description Related information Understand search integration service

Configuration XML for search integration

Use S3 REST API Create platform services endpoint

JSON generated by search integration service

When you enable the search integration service for a bucket, a JSON document is generated and sent to the destination endpoint each time object metadata or tags are added, updated, or deleted.

This example shows an example of the JSON that could be generated when an object with the key SGWS/Tagging.txt is created in a bucket named test. The test bucket is not versioned, so the versionId tag is empty.

{ "bucket": "test", "key": "SGWS/Tagging.txt", "versionId": "", "accountId": "86928401983529626822", "size": 38, "md5": "3d6c7634a85436eee06d43415012855", "region":"us-east-1", "metadata": { "age": "25" }, "tags": { "color": "yellow" } }

Object metadata included in metadata notifications

The table lists all the fields that are included in the JSON document that is sent to the destination endpoint when search integration is enabled. The document name includes the bucket name, object name, and version ID if present.

863

Type

Item name and description

Bucket and object information

bucket: Name of the bucket

key: Object key name

versionID: Object version, for objects in versioned buckets

region: Bucket region, for example us-east-1 System metadata

size: Object size (in bytes) as visible to an HTTP client

md5: Object hash

User metadata

metadata: All user metadata for the object, as key-value pairs

key:value

Tags

tags: All object tags defined for the object, as key-value pairs

key:value

For tags and user metadata, StorageGRID passes dates and numbers to Elasticsearch as strings or as S3 event notifications. To configure Elasticsearch to interpret these strings as dates or numbers, follow the Elasticsearch instructions for dynamic field mapping and for mapping date formats. You must enable the dynamic field mappings on the index before you configure the search integration service. After a document is indexed, you can’t edit the document’s field types in the index. Use S3 REST API

S3 REST API supported versions and updates

StorageGRID supports the Simple Storage Service (S3) API, which is implemented as a set of Representational State Transfer (REST) web services.

Support for the S3 REST API enables you to connect service-oriented applications developed for S3 web services with on-premise object storage that uses the StorageGRID system. Minimal changes to a client application’s current use of S3 REST API calls are required.

Supported versions

StorageGRID supports the following specific versions of S3 and HTTP.

864

Item

Version S3 API specification

Amazon Web Services (AWS) Documentation: Amazon Simple Storage Service API Reference

HTTP

1.1

For more information about HTTP, see HTTP/1.1 (RFCs 7230-35).

IETF RFC 2616: Hypertext Transfer Protocol (HTTP/1.1)

Note: StorageGRID does not support HTTP/1.1 pipelining.

Updates to S3 REST API support Release

Comments

11.8

Updated the names of S3 operations to match the names used in the Amazon Web Services (AWS) Documentation: Amazon Simple Storage Service API Reference.

11.7

Added Quick reference: Supported S3 API requests.

Added support for using GOVERNANCE mode with S3 Object Lock.

Added support for the StorageGRID-specific x-ntap-sg-cgr-replication- status response header for GET Object and HEAD Object requests. This header provides an object’s replication status for cross-grid replication.

SelectObjectContent requests now support Parquet objects.

11.6

Added support for using the partNumber request parameter in GET Object and HEAD Object requests.

Added support for a default retention mode and a default retention period at the bucket level for S3 Object Lock. 864

Item

Version S3 API specification

Amazon Web Services (AWS) Documentation: Amazon Simple Storage Service API Reference

HTTP

1.1

For more information about HTTP, see HTTP/1.1 (RFCs 7230-35).

IETF RFC 2616: Hypertext Transfer Protocol (HTTP/1.1)

Note: StorageGRID does not support HTTP/1.1 pipelining.

Updates to S3 REST API support Release

Comments

11.8

Updated the names of S3 operations to match the names used in the Amazon Web Services (AWS) Documentation: Amazon Simple Storage Service API Reference.

11.7

Added Quick reference: Supported S3 API requests.

Added support for using GOVERNANCE mode with S3 Object Lock.

Added support for the StorageGRID-specific x-ntap-sg-cgr-replication- status response header for GET Object and HEAD Object requests. This header provides an object’s replication status for cross-grid replication.

SelectObjectContent requests now support Parquet objects.

11.6

Added support for using the partNumber request parameter in GET Object and HEAD Object requests.

Added support for a default retention mode and a default retention period at the bucket level for S3 Object Lock.