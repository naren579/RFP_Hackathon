▪ Select Client certificate details to display the certificate metadata and certificate PEM. ▪ Select Copy certificate PEM to copy the certificate contents for pasting elsewhere.

c. Select Create to save the certificate in the Grid Manager.

The new certificates appear on the Client tab.

8. Configure an external monitoring tool, such as Grafana. Generated certificate from Grid Manager

Use this procedure to add an administrator client certificate if a management interface certificate was not configured and you plan to add a client certificate for Prometheus that uses the generate certificate function in Grid Manager. Steps

1. In the Grid Manager, select CONFIGURATION > Security > Certificates and then select the Client tab.

2. Select Add.

3. Enter a certificate name.

4. To access Prometheus metrics using your external monitoring tool, select Allow prometheus.

5. Select Continue.

6. For the Attach certificates step, select Generate certificate.

7. Specify the certificate information:

Subject (optional): X.509 subject or distinguished name (DN) of the certificate owner. ◦ Days valid: The number of days the generated certificate is valid, starting at the time it is generated. ◦ Add key usage extensions: If selected (default and recommended), key usage and extended key usage extensions are added to the generated certificate.

These extensions define the purpose of the key contained in the certificate.

Leave this checkbox selected unless you experience connection problems with older clients when certificates include these extensions.

417

8. Select Generate. 9.

Select Client certificate details to display the certificate metadata and certificate PEM.

You will not be able to view the certificate private key after you close the dialog. Copy or download the key to a safe location.

Select Copy certificate PEM to copy the certificate contents for pasting elsewhere. ◦ Select Download certificate to save the certificate file.

Specify the certificate file name and download location. Save the file with the extension .pem. For example: storagegrid_certificate.pem

Select Copy private key to copy the certificate private key for pasting elsewhere. ◦ Select Download private key to save the private key as a file.

Specify the private key file name and download location.

10. Select Create to save the certificate in the Grid Manager.

The new certificate appears on the Client tab.

11. In the Grid Manager, select CONFIGURATION > Security > Certificates and then select the Global tab.

12. Select Management Interface certificate.

13. Select Use custom certificate.

14. Upload the certificate.pem and private_key.pem files from the client certificate details step. There is no need to upload CA bundle. a. Select Upload certificate and then select Continue.

b. Upload each certificate file (.pem).

c. Select Save to save the certificate in the Grid Manager.

The new certificate appears on the Management Interface certificate page.

15. Configure an external monitoring tool, such as Grafana.

Configure an external monitoring tool Steps

1. Configure the following settings on your external monitoring tool, such as Grafana.

a. Name: Enter a name for the connection.

StorageGRID does not require this information, but you must provide a name to test the connection.

b. URL: Enter the domain name or IP address for the Admin Node. Specify HTTPS and port 9091. For example: https://admin-node.example.com:9091

c. Enable TLS Client Auth and With CA Cert. 10. Select Create to save the certificate in the Grid Manager.

The new certificate appears on the Client tab.

11. In the Grid Manager, select CONFIGURATION > Security > Certificates and then select the Global tab.

12. Select Management Interface certificate.

13. Select Use custom certificate.

14. Upload the certificate.pem and private_key.pem files from the client certificate details step. There is no need to upload CA bundle. a. Select Upload certificate and then select Continue.

b. Upload each certificate file (.pem).

c. Select Save to save the certificate in the Grid Manager.

The new certificate appears on the Management Interface certificate page.

15. Configure an external monitoring tool, such as Grafana.

Configure an external monitoring tool Steps

1. Configure the following settings on your external monitoring tool, such as Grafana.

a. Name: Enter a name for the connection.

StorageGRID does not require this information, but you must provide a name to test the connection.

b. URL: Enter the domain name or IP address for the Admin Node. Specify HTTPS and port 9091. For example: https://admin-node.example.com:9091

c. Enable TLS Client Auth and With CA Cert.

d. Under TLS/SSL Auth Details, copy and paste: +

418

▪ The management interface CA certificate to CA Cert ▪ The client certificate to Client Cert ▪ The private key to Client Key

e. ServerName: Enter the domain name of the Admin Node.