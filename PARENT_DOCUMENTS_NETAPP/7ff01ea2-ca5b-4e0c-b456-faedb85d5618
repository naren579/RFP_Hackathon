The bucket details page appears.

4. Select Platform services > Event notifications.

5. Select the Enable event notifications checkbox.

6. Paste the notification configuration XML into the text box, and select Save changes. 854

Platform services must be enabled for each tenant account by a StorageGRID administrator using the Grid Manager or Grid Management API. Contact your StorageGRID administrator if an error occurs when you save the configuration XML.

7. Verify that event notifications are configured correctly:

a. Perform an action on an object in the source bucket that meets the requirements for triggering a

notification as configured in the configuration XML. 853

<NotificationConfiguration> <TopicConfiguration> <Id>Image-created</Id> <Filter> <S3Key> <FilterRule> <Name>prefix</Name> <Value>images/</Value> </FilterRule> </S3Key> </Filter> <Topic>arn:aws:sns:us-east-1:050340950352:sgws-topic</Topic> <Event>s3:ObjectCreated:*</Event> </TopicConfiguration> </NotificationConfiguration>

2. In the Tenant Manager select STORAGE (S3) > Buckets.

3. Select the name of the source bucket.

The bucket details page appears.

4. Select Platform services > Event notifications.

5. Select the Enable event notifications checkbox.

6. Paste the notification configuration XML into the text box, and select Save changes. 854

Platform services must be enabled for each tenant account by a StorageGRID administrator using the Grid Manager or Grid Management API. Contact your StorageGRID administrator if an error occurs when you save the configuration XML.

7. Verify that event notifications are configured correctly:

a. Perform an action on an object in the source bucket that meets the requirements for triggering a

notification as configured in the configuration XML.

In the example, an event notification is sent whenever an object is created with the images/ prefix.

b. Confirm that a notification has been delivered to the destination Amazon SNS or Kafka topic.

855

For example, if your destination topic is hosted on the Amazon SNS, you could configure the service to send you an email when the notification is delivered. { "Records":[ { "eventVersion":"2.0", "eventSource":"sgws:s3", "eventTime":"2017-08-08T23:52:38Z", "eventName":"ObjectCreated:Put", "userIdentity":{ "principalId":"1111111111111111111" }, "requestParameters":{ "sourceIPAddress":"193.51.100.20" }, "responseElements":{ "x-amz-request-id":"122047343" }, "s3":{ "s3SchemaVersion":"1.0", "configurationId":"Image-created", "bucket":{ "name":"test1", "ownerIdentity":{ "principalId":"1111111111111111111" }, "arn":"arn:sgws:s3:::test1" }, "object":{ "key":"images/cat.jpg", "size":0, "eTag":"d41d8cd98f00b204e9800998ecf8427e", "sequencer":"14D90402421461C7" } } } ] }

If the notification is received at the destination topic, you have successfully configured your source bucket for StorageGRID notifications.

Related information Understand notifications for buckets

856

Use S3 REST API

Create platform services endpoint Use search integration service

The search integration service is one of the three StorageGRID platform services. You can enable this service to send object metadata to a destination search index whenever an object is created, deleted, or its metadata or tags are updated.

You can configure search integration by using the Tenant Manager to apply custom StorageGRID configuration XML to a bucket.

Because the search integration service causes object metadata to be sent to a destination, its configuration XML is referred to as metadata notification configuration XML. This configuration XML is different than the notification configuration XML used to enable event notifications.

See the instructions for implementing S3 client applications for details about the following custom StorageGRID S3 REST API operations:

DELETE Bucket metadata notification configuration

GET Bucket metadata notification configuration

PUT Bucket metadata notification configuration Related information

Configuration XML for search integration

Object metadata included in metadata notifications

JSON generated by search integration service

Configure search integration service

Use S3 REST API Configuration XML for search integration

The search integration service is configured using a set of rules contained within <MetadataNotificationConfiguration> and </MetadataNotificationConfiguration> tags. Each rule specifies the objects that the rule applies to, and the destination where StorageGRID should send those objects' metadata. Related information Understand notifications for buckets

856

Use S3 REST API

Create platform services endpoint Use search integration service

The search integration service is one of the three StorageGRID platform services. You can enable this service to send object metadata to a destination search index whenever an object is created, deleted, or its metadata or tags are updated.