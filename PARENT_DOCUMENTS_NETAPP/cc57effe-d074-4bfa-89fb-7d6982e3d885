Step 5: Resolve Node Conflicts (and start decommission)

From Step 5 (Resolve Node Conflicts) of the Decommission Site wizard, you can determine if any nodes in your StorageGRID system are disconnected or if any nodes at the selected site belong to a high availability (HA) group. After any node conflicts are resolved, you start the decommission procedure from this page.

Before you begin To delete a rule, select the trash can icon and select OK.

You must delete the Make 2 Copies rule before you can decommission a site.

1467

3. Confirm that no unused ILM rules refer to the site, and the Next button is enabled.

4. Select Next.

Any remaining storage pools and erasure-coding profiles that refer to the site will become invalid when the site is removed. When StorageGRID decommissions the site, it will automatically deactivate any unused erasure-coding profiles that refer to the site, and it will automatically delete any unused storage pools that refer to the site. The All Storage Nodes storage pool (StorageGRID 11.6 and earlier) is removed because it uses the All Sites site. Step 5 (Resolve Node Conflicts) appears.

Step 5: Resolve Node Conflicts (and start decommission)

From Step 5 (Resolve Node Conflicts) of the Decommission Site wizard, you can determine if any nodes in your StorageGRID system are disconnected or if any nodes at the selected site belong to a high availability (HA) group. After any node conflicts are resolved, you start the decommission procedure from this page.

Before you begin

You must ensure that all nodes in your StorageGRID system are in the correct state, as follows:

All nodes in your StorageGRID system must be connected (

).

If you are performing a disconnected site decommission, all nodes at the site you are removing must be disconnected, and all nodes at all other sites must be connected.

The decommission will not start if one or more volumes are offline (unmounted) or if they are online (mounted) but in an error state. If one or more volumes go offline while a decommission is in progress, the decommission process completes after these volumes have come back online.

No node at the site you are removing can have an interface that belongs to a high availability (HA) group. About this task

If any node is listed for Step 5 (Resolve Node Conflicts), you must correct the issue before you can start the decommission.

Before starting the site decommission procedure from this page, review the following considerations:

You must allow adequate time for the decommission procedure to complete.

Moving or deleting object data from a site might take days, weeks, or even months, depending on the amount of data at the site, the load on your system, network latencies, and the nature of the required ILM changes.

While the site decommission procedure is running:

You can’t create ILM rules that refer to the site being decommissioned. You also can’t edit an existing ILM rule to refer to the site.

1468

◦ You can’t perform other maintenance procedures, such as expansion or upgrade. If you need to perform another maintenance procedure during a connected site decommission, you can pause the procedure while the Storage Nodes are being removed. The Pause button is enabled during the "Decommissioning Replicated and Erasure-Coded Data" stage.

If you need to recover any node after starting the site decommission procedure, you must contact support. Steps

1. Review the disconnected nodes section of Step 5 (Resolve Node Conflicts) to determine if any nodes in

your StorageGRID system have a Connection State of Unknown (

) or Administratively Down (

2. If any nodes are disconnected, bring them back online.

See the Node procedures. Contact technical support if you need assistance.

).

1469

3. When all disconnected nodes have been brought back online, review the HA groups section of Step 5 (Resolve Node Conflicts).

This table lists any nodes at the selected site that belong to a high availability (HA) group.

4. If any nodes are listed, do either of the following:

Edit each affected HA group to remove the node interface. ◦ Remove an HA group that only includes nodes from this site. See the instructions for administering StorageGRID.

If all nodes are connected and no nodes in the selected site are used in an HA group, the Provisioning Passphrase field is enabled.

5. Enter the provisioning passphrase.

The Start Decommission button becomes enabled.

1470

6. If you are ready to start the site decommission procedure, select Start Decommission.

A warning lists the site and nodes that will be removed. You are reminded that it might take days, weeks, or even months to completely remove the site.

1471 your StorageGRID system have a Connection State of Unknown (

) or Administratively Down (

2. If any nodes are disconnected, bring them back online.

See the Node procedures. Contact technical support if you need assistance.

).

1469