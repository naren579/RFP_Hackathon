If you use server-side encryption, the request headers you provide depend on whether the source object is encrypted and on whether you plan to encrypt the target object.

920

• If the source object is encrypted using a customer-provided key (SSE-C), you must include the following

three headers in the CopyObject request, so the object can be decrypted and then copied:

x-amz-copy-source-server-side-encryption-customer-algorithm: Specify AES256. ◦ x-amz-copy-source-server-side-encryption-customer-key: Specify the encryption key you provided when you created the source object.

x-amz-copy-source-server-side-encryption-customer-key-MD5: Specify the MD5 digest you provided when you created the source object.

If you want to encrypt the target object (the copy) with a unique key that you provide and manage, include the following three headers: x-amz-server-side-encryption-customer-algorithm: Specify AES256. ◦ x-amz-server-side-encryption-customer-key: Specify a new encryption key for the target object.

x-amz-server-side-encryption-customer-key-MD5: Specify the MD5 digest of the new encryption key.

The encryption keys you provide are never stored. If you lose an encryption key, you lose the corresponding object. Before using customer-provided keys to secure object data, review the considerations for using server-side encryption.

If you want to encrypt the target object (the copy) with a unique key managed by StorageGRID (SSE), include this header in the CopyObject request: ◦ x-amz-server-side-encryption x-amz-copy-source-server-side-encryption-customer-key-MD5: Specify the MD5 digest you provided when you created the source object.

If you want to encrypt the target object (the copy) with a unique key that you provide and manage, include the following three headers: x-amz-server-side-encryption-customer-algorithm: Specify AES256. ◦ x-amz-server-side-encryption-customer-key: Specify a new encryption key for the target object.

x-amz-server-side-encryption-customer-key-MD5: Specify the MD5 digest of the new encryption key.

The encryption keys you provide are never stored. If you lose an encryption key, you lose the corresponding object. Before using customer-provided keys to secure object data, review the considerations for using server-side encryption.

If you want to encrypt the target object (the copy) with a unique key managed by StorageGRID (SSE), include this header in the CopyObject request: ◦ x-amz-server-side-encryption

The server-side-encryption value of the object can’t be updated. Instead, make a copy with a new server-side-encryption value using x-amz-metadata- directive: REPLACE. Versioning

If the source bucket is versioned, you can use the x-amz-copy-source header to copy the latest version of an object. To copy a specific version of an object, you must explicitly specify the version to copy using the versionId subresource. If the destination bucket is versioned, the generated version is returned in the x- amz-version-id response header. If versioning is suspended for the target bucket, then x-amz-version- id returns a "null" value. GetObject

You can use the S3 GetObject request to retrieve an object from an S3 bucket.

GetObject and multipart objects

You can use the partNumber request parameter to retrieve a specific part of a multipart or segmented object. The x-amz-mp-parts-count response element indicates how many parts the object has.

You can set partNumber to 1 for both segmented/multipart objects and non-segmented/non-multipart objects; however, the x-amz-mp-parts-count response element is only returned for segmented or multipart objects.

921

UTF-8 characters in user metadata

StorageGRID does not parse or interpret escaped UTF-8 characters in user-defined metadata. GET requests for an object with escaped UTF-8 characters in user-defined metadata don’t return the x-amz-missing-meta header if the key name or value includes unprintable characters.

Unsupported request header

The following request header is not supported and returns XNotImplemented:

x-amz-website-redirect-location Versioning

If a versionId subresource is not specified, the operation fetches the most recent version of the object in a versioned bucket. If the current version of the object is a delete marker, a "Not Found" status is returned with the x-amz-delete-marker response header set to true.

Request headers for server-side encryption with customer-provided encryption keys (SSE-C)

Use all three of the headers if the object is encrypted with a unique key that you provided.

x-amz-server-side-encryption-customer-algorithm: Specify AES256.

x-amz-server-side-encryption-customer-key: Specify your encryption key for the object.

x-amz-server-side-encryption-customer-key-MD5: Specify the MD5 digest of the object’s encryption key.