NODE_TYPE: VM_API_Gateway

This example entry is for an example Gateway Node on all three networks. In this example, no Client Network parameters were specified in the global section of the configuration file, so they must be specified for the node: [DC1-G1] NODE_TYPE = VM_API_Gateway

GRID_NETWORK_IP = 10.1.0.5 ADMIN_NETWORK_IP = 10.3.0.5

CLIENT_NETWORK_CONFIG = STATIC CLIENT_NETWORK_TARGET = SG-Client-Network CLIENT_NETWORK_MASK = 255.255.255.0 CLIENT_NETWORK_GATEWAY = 10.4.0.1 CLIENT_NETWORK_IP = 10.4.0.5

ADMIN_IP = 10.1.0.2

Non-primary Admin Node

The following additional settings are required for non-primary Admin Nodes:

NODE_TYPE: VM_Admin_Node

ADMIN_ROLE: Non-Primary

This example entry is for a non-primary Admin Node that is not on the Client Network:

220 [DC2-ADM1] ADMIN_ROLE = Non-Primary NODE_TYPE = VM_Admin_Node

GRID_NETWORK_TARGET = SG-Grid-Network GRID_NETWORK_IP = 10.1.0.6 ADMIN_NETWORK_IP = 10.3.0.6

ADMIN_IP = 10.1.0.2 GRID_NETWORK_IP = 10.1.0.5 ADMIN_NETWORK_IP = 10.3.0.5

CLIENT_NETWORK_CONFIG = STATIC CLIENT_NETWORK_TARGET = SG-Client-Network CLIENT_NETWORK_MASK = 255.255.255.0 CLIENT_NETWORK_GATEWAY = 10.4.0.1 CLIENT_NETWORK_IP = 10.4.0.5

ADMIN_IP = 10.1.0.2

Non-primary Admin Node

The following additional settings are required for non-primary Admin Nodes:

NODE_TYPE: VM_Admin_Node

ADMIN_ROLE: Non-Primary

This example entry is for a non-primary Admin Node that is not on the Client Network:

220 [DC2-ADM1] ADMIN_ROLE = Non-Primary NODE_TYPE = VM_Admin_Node

GRID_NETWORK_TARGET = SG-Grid-Network GRID_NETWORK_IP = 10.1.0.6 ADMIN_NETWORK_IP = 10.3.0.6

ADMIN_IP = 10.1.0.2

The following additional setting is optional for non-primary Admin Nodes:

DISK: By default, Admin Nodes are assigned two additional 200 GB hard disks for audit and database use. You can increase these settings using the DISK parameter. For example: DISK = INSTANCES=2, CAPACITY=300

For Admin nodes, INSTANCES must always equal 2.

Run the Bash script

You can use the deploy-vsphere-ovftool.sh Bash script and the deploy-vsphere-ovftool.ini configuration file you modified to automate the deployment of StorageGRID nodes in VMware vSphere.

Before you begin

You have created a deploy-vsphere-ovftool.ini configuration file for your environment.

You can use the help available with the Bash script by entering the help commands (-h/--help). For example: ./deploy-vsphere-ovftool.sh -h

or

./deploy-vsphere-ovftool.sh --help

Steps

1. Log in to the Linux machine you are using to run the Bash script.

2. Change to the directory where you extracted the installation archive.

For example:

221

cd StorageGRID-Webscale-version/vsphere

3. To deploy all grid nodes, run the Bash script with the appropriate options for your environment. For example:

./deploy-vsphere-ovftool.sh --username=user --password=pwd ./deploy- vsphere-ovftool.ini

4. If a grid node failed to deploy because of an error, resolve the error and rerun the Bash script for only that node.

For example: ./deploy-vsphere-ovftool.sh --username=user --password=pwd --single -node="DC1-S3" ./deploy-vsphere-ovftool.ini

The deployment is complete when the status for each node is "Passed."

Deployment Summary +-----------------------------+----------+----------------------+ | node | attempts | status | +-----------------------------+----------+----------------------+ | DC1-ADM1 | 1 | Passed | | DC1-G1 | 1 | Passed | | DC1-S1 | 1 | Passed | | DC1-S2 | 1 | Passed | | DC1-S3 | 1 | Passed | +-----------------------------+----------+----------------------+

Automate the configuration of StorageGRID

After deploying the grid nodes, you can automate the configuration of the StorageGRID system.

Before you begin

You know the location of the following files from the installation archive. Filename

Description

configure-storagegrid.py

Python script used to automate the configuration

configure-storagegrid.sample.json

Example configuration file for use with the script

222

Filename

Description

configure-storagegrid.blank.json

Blank configuration file for use with the script

You have created a configure-storagegrid.json configuration file. To create this file, you can modify the example configuration file (configure-storagegrid.sample.json) or the blank configuration file (configure-storagegrid.blank.json). The deployment is complete when the status for each node is "Passed."

Deployment Summary +-----------------------------+----------+----------------------+ | node | attempts | status | +-----------------------------+----------+----------------------+ | DC1-ADM1 | 1 | Passed | | DC1-G1 | 1 | Passed | | DC1-S1 | 1 | Passed | | DC1-S2 | 1 | Passed | | DC1-S3 | 1 | Passed | +-----------------------------+----------+----------------------+

Automate the configuration of StorageGRID

After deploying the grid nodes, you can automate the configuration of the StorageGRID system.

Before you begin