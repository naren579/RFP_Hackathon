1. Configure the following settings on your external monitoring tool, such as Grafana.

a. Name: Enter a name for the connection.

StorageGRID does not require this information, but you must provide a name to test the connection.

b. URL: Enter the domain name or IP address for the Admin Node. Specify HTTPS and port 9091. For example: https://admin-node.example.com:9091

c. Enable TLS Client Auth and With CA Cert.

d. Under TLS/SSL Auth Details, copy and paste: +

418

▪ The management interface CA certificate to CA Cert ▪ The client certificate to Client Cert ▪ The private key to Client Key

e. ServerName: Enter the domain name of the Admin Node.

ServerName must match the domain name as it appears in the management interface certificate.

2. Save and test the certificate and private key that you copied from StorageGRID or a local file.

You can now access the Prometheus metrics from StorageGRID with your external monitoring tool.

For information about the metrics, see the instructions for monitoring StorageGRID. Edit client certificates

You can edit an administrator client certificate to change its name, enable or disable Prometheus access, or upload a new certificate when the current one has expired.

Steps

1. Select CONFIGURATION > Security > Certificates and then select the Client tab.

Certificate expiration dates and Prometheus access permissions are listed in the table. If a certificate will expire soon or is already expired, a message appears in the table and an alert is triggered.

2. Select the certificate you want to edit.

3. Select Edit and then select Edit name and permission

4. Enter a certificate name.

5. To access Prometheus metrics using your external monitoring tool, select Allow prometheus.

6. Select Continue to save the certificate in the Grid Manager. The updated certificate displays on the Client tab.

Attach new client certificate

You can upload a new certificate when the current one has expired.

Steps

1. Select CONFIGURATION > Security > Certificates and then select the Client tab.

Certificate expiration dates and Prometheus access permissions are listed in the table. If a certificate will expire soon or is already expired, a message appears in the table and an alert is triggered.

2. Select the certificate you want to edit.

3. Select Edit and then select an edit option.

419

420

Upload certificate

Copy the certificate text to paste elsewhere. a. Select Upload certificate and then select Continue.

b. Upload the client certificate name (.pem).

Select Client certificate details to display the certificate metadata and certificate PEM.

▪ Select Download certificate to save the certificate file.

Specify the certificate file name and download location. Save the file with the extension .pem. For example: storagegrid_certificate.pem

▪ Select Copy certificate PEM to copy the certificate contents for pasting elsewhere.

c. Select Create to save the certificate in the Grid Manager.

The updated certificate displays on the Client tab.

Generate certificate

Generate the certificate text to paste elsewhere. a. Select Generate certificate.

b. Specify the certificate information:

▪ Subject (optional): X.509 subject or distinguished name (DN) of the certificate owner. ▪ Days valid: The number of days the generated certificate is valid, starting at the time it is

generated.

▪ Add key usage extensions: If selected (default and recommended), key usage and extended

key usage extensions are added to the generated certificate.

These extensions define the purpose of the key contained in the certificate. 3. Select Edit and then select an edit option.

419

420

Upload certificate

Copy the certificate text to paste elsewhere. a. Select Upload certificate and then select Continue.

b. Upload the client certificate name (.pem).

Select Client certificate details to display the certificate metadata and certificate PEM.

▪ Select Download certificate to save the certificate file.

Specify the certificate file name and download location. Save the file with the extension .pem. For example: storagegrid_certificate.pem

▪ Select Copy certificate PEM to copy the certificate contents for pasting elsewhere.

c. Select Create to save the certificate in the Grid Manager.

The updated certificate displays on the Client tab.

Generate certificate

Generate the certificate text to paste elsewhere. a. Select Generate certificate.

b. Specify the certificate information:

▪ Subject (optional): X.509 subject or distinguished name (DN) of the certificate owner. ▪ Days valid: The number of days the generated certificate is valid, starting at the time it is

generated.

▪ Add key usage extensions: If selected (default and recommended), key usage and extended

key usage extensions are added to the generated certificate.

These extensions define the purpose of the key contained in the certificate.