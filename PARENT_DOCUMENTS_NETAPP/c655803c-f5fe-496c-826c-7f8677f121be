7. Verify that replication is configured correctly:

a. Add an object to the source bucket that meets the requirements for replication as specified in the replication configuration.

In the example shown earlier, objects that match the prefix "2020" are replicated. If you specify a Role in the configuration XML it will be ignored. This value is not used by StorageGRID.

850 <ReplicationConfiguration> <Role></Role> <Rule> <Status>Enabled</Status> <Prefix>2020</Prefix> <Destination> <Bucket>urn:sgws:s3:::2017-records</Bucket> <StorageClass>STANDARD</StorageClass> </Destination> </Rule> </ReplicationConfiguration>

2. Select View buckets from the dashboard, or select STORAGE (S3) > Buckets.

3. Select the name of the source bucket.

The bucket details page appears.

4. Select Platform services > Replication.

5. Select the Enable replication checkbox.

6. Paste the replication configuration XML into the text box, and select Save changes.

851

Platform services must be enabled for each tenant account by a StorageGRID administrator using the Grid Manager or Grid Management API. Contact your StorageGRID administrator if an error occurs when you save the configuration XML.

7. Verify that replication is configured correctly:

a. Add an object to the source bucket that meets the requirements for replication as specified in the replication configuration.

In the example shown earlier, objects that match the prefix "2020" are replicated.

b. Confirm that the object has been replicated to the destination bucket.

852

For small objects, replication happens quickly.

Related information

Create platform services endpoint Configure event notifications

The notifications service is one of the three StorageGRID platform services. You can enable notifications for a bucket to send information about specified events to a destination Kafka cluster or service that supports the AWS Simple Notification Service (Amazon SNS).

Before you begin

Platform services were enabled for your tenant account by a StorageGRID administrator.

You have already created a bucket to act as the source of notifications.

The endpoint that you intend to use as a destination for event notifications already exists, and you have its URN.

You belong to a user group that has the Manage all buckets or Root access permission. These permissions override the permission settings in group or bucket policies when configuring the bucket using the Tenant Manager. About this task

After you configure event notifications, whenever a specified event occurs for an object in the source bucket, a notification is generated and sent to the Amazon SNS or Kafka topic used as the destination endpoint. To enable notifications for a bucket, you must create and apply valid notification configuration XML. The notification configuration XML must use the URN of an event notifications endpoint for each destination.

For general information about event notifications and how to configure them, see Amazon documentation. For information about how StorageGRID implements the S3 bucket notification configuration API, see the instructions for implementing S3 client applications.

If you enable event notifications for a bucket that contains objects, notifications are sent only for actions that are performed after the notification configuration is saved. Steps

1. Enable notifications for your source bucket:

Use a text editor to create the notification configuration XML required to enable event notifications, as specified in the S3 notification API.

When configuring the XML, use the URN of an event notifications endpoint as the destination topic.

853

<NotificationConfiguration> <TopicConfiguration> <Id>Image-created</Id> <Filter> <S3Key> <FilterRule> <Name>prefix</Name> <Value>images/</Value> </FilterRule> </S3Key> </Filter> <Topic>arn:aws:sns:us-east-1:050340950352:sgws-topic</Topic> <Event>s3:ObjectCreated:*</Event> </TopicConfiguration> </NotificationConfiguration>

2. In the Tenant Manager select STORAGE (S3) > Buckets.

3. Select the name of the source bucket.

The bucket details page appears.

4. Select Platform services > Event notifications.

5. Select the Enable event notifications checkbox.

6. Paste the notification configuration XML into the text box, and select Save changes. 854

Platform services must be enabled for each tenant account by a StorageGRID administrator using the Grid Manager or Grid Management API. Contact your StorageGRID administrator if an error occurs when you save the configuration XML.

7. Verify that event notifications are configured correctly:

a. Perform an action on an object in the source bucket that meets the requirements for triggering a

notification as configured in the configuration XML. 853