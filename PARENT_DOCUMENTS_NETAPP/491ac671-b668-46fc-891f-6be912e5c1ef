Client delete request: An S3 or Swift client can issue a delete object request. When a client deletes an object, all copies of the object are removed from the StorageGRID system.

Delete objects in bucket: Tenant Manager users can use this option to permanently remove all copies of the objects and object versions in selected buckets from the StorageGRID system. S3 bucket lifecycle: S3 clients can add a lifecycle configuration to their buckets that specifies an Expiration action. If a bucket lifecycle exists, StorageGRID automatically deletes all copies of an object when the date or number of days specified in the Expiration action are met, unless the client deletes the object first.

ILM placement instructions: Assuming that the bucket does not have S3 Object Lock enabled and that there is no bucket lifecycle, StorageGRID automatically deletes an object when the last time period in the ILM rule ends and there are no further placements specified for the object.

When an S3 bucket lifecycle is configured, the lifecycle expiration actions override the ILM policy for objects that match the lifecycle filter. As a result, an object might be retained on the grid even after any ILM instructions for placing the object have lapsed.

See How objects are deleted for more information. Data flow for client deletes

1. The LDR service receives a delete request from the client application.

2. The LDR service updates the metadata store so the object looks deleted to client requests, and instructs the ILM engine to remove all copies of object data.

3. The object is removed from the system. The metadata store is updated to remove object metadata. Data flow for ILM deletes

31

1. The ILM engine determines that the object needs to be deleted. ILM placement instructions: Assuming that the bucket does not have S3 Object Lock enabled and that there is no bucket lifecycle, StorageGRID automatically deletes an object when the last time period in the ILM rule ends and there are no further placements specified for the object.

When an S3 bucket lifecycle is configured, the lifecycle expiration actions override the ILM policy for objects that match the lifecycle filter. As a result, an object might be retained on the grid even after any ILM instructions for placing the object have lapsed.

See How objects are deleted for more information. Data flow for client deletes

1. The LDR service receives a delete request from the client application.

2. The LDR service updates the metadata store so the object looks deleted to client requests, and instructs the ILM engine to remove all copies of object data.

3. The object is removed from the system. The metadata store is updated to remove object metadata. Data flow for ILM deletes

31

1. The ILM engine determines that the object needs to be deleted.

2. The ILM engine notifies the metadata store. The metadata store updates object metadata so that the object looks deleted to client requests.

3. The ILM engine removes all copies of the object. The metadata store is updated to remove object metadata. Use information lifecycle management

You use information lifecycle management (ILM) to control the placement, duration, and ingest behavior for all objects in your StorageGRID system. ILM rules determine how StorageGRID stores objects over time. You configure one or more ILM rules and then add them to an ILM policy.

A grid has only one active policy at a time. A policy can contain multiple rules. ILM rules define:

Which objects should be stored. A rule can apply to all objects, or you can specify filters to identify which objects a rule applies to. For example, a rule can apply only to objects associated with certain tenant accounts, specific S3 buckets or Swift containers, or specific metadata values.

The storage type and location. Objects can be stored on Storage Nodes, in Cloud Storage Pools, or on Archive Nodes.

The type of object copies made. Copies can be replicated or erasure-coded.

For replicated copies, the number of copies made.

For erasure-coded copies, the erasure-coding scheme used.

The changes over time to an objectâ€™s storage location and type of copies.

How object data is protected as objects are ingested into the grid (synchronous placement or dual commit). Note that object metadata is not managed by ILM rules. Instead, object metadata is stored in a Cassandra database in what is known as a metadata store. Three copies of object metadata are automatically maintained at each site to protect the data from loss.

32

Example ILM rule

As an example, an ILM rule could specify the following:

Apply only to the objects belonging to Tenant A.

Make two replicated copies of those objects and store each copy at a different site.

Retain the two copies "forever," which means that StorageGRID will not automatically delete them. Instead, StorageGRID will retain these objects until they are deleted by a client delete request or by the expiration of a bucket lifecycle.