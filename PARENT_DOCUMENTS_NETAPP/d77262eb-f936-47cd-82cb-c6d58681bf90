This example ILM rule applies only to the S3 tenant account named Bank of ABC. It matches any object in the bank-records bucket and then uses erasure coding to store the object on Storage Nodes at three data center sites using a 6+3 erasure-coding profile. This rule satisfies the requirements of buckets with S3 Object Lock enabled: a copy is kept on Storage Nodes from day 0 to forever, using Ingest time as the reference time. Rule definition

Example value

Rule name

Compliant Rule: EC Objects in bank-records Bucket - Bank of ABC

Tenant Account

Bank of ABC

Bucket Name

bank-records

Advanced filter

Object Size (MB) greater than 1

Note: This filter ensures that erasure coding is not used for objects 1 MB or smaller. Rule definition

Example value

Reference time

Ingest time

710

Rule definition

Example value

Placements

From day 0 store forever

Erasure-coding profile

Create an erasure-coded copy on Storage Nodes at three data center sites

Uses 6+3 erasure-coding scheme

ILM rule 2 for S3 Object Lock example: Non-compliant rule ILM rule 1 for S3 Object Lock example: Erasure-coding profile with bucket matching

This example ILM rule applies only to the S3 tenant account named Bank of ABC. It matches any object in the bank-records bucket and then uses erasure coding to store the object on Storage Nodes at three data center sites using a 6+3 erasure-coding profile. This rule satisfies the requirements of buckets with S3 Object Lock enabled: a copy is kept on Storage Nodes from day 0 to forever, using Ingest time as the reference time. Rule definition

Example value

Rule name

Compliant Rule: EC Objects in bank-records Bucket - Bank of ABC

Tenant Account

Bank of ABC

Bucket Name

bank-records

Advanced filter

Object Size (MB) greater than 1

Note: This filter ensures that erasure coding is not used for objects 1 MB or smaller. Rule definition

Example value

Reference time

Ingest time

710

Rule definition

Example value

Placements

From day 0 store forever

Erasure-coding profile

Create an erasure-coded copy on Storage Nodes at three data center sites

Uses 6+3 erasure-coding scheme

ILM rule 2 for S3 Object Lock example: Non-compliant rule

This example ILM rule initially stores two replicated object copies on Storage Nodes. After one year, it stores one copy on a Cloud Storage Pool forever. Because this rule uses a Cloud Storage Pool, it is not compliant and will not apply to the objects in buckets with S3 Object Lock enabled. Rule definition

Example value

Rule name

Non-compliant rule: Use Cloud Storage Pool

Tenant accounts

Not specified

Bucket name

Not specified, but will only apply to buckets that don’t have S3 Object Lock (or the legacy Compliance feature) enabled.

Advanced filter

Not specified

Rule definition Example value

Reference time

Ingest time

Placements

On Day 0, keep two replicated copies on Storage Nodes in Data Center 1 and Data Center 2 for 365 days

After 1 year, keep one replicated copy in a Cloud Storage Pool forever

ILM rule 3 for S3 Object Lock example: Default rule

This example ILM rule copies object data to storage pools in two data centers. This compliant rule is designed to be the default rule in the ILM policy. It does not include any filters, does not use the Noncurrent reference time, and satisfies the requirements of buckets with S3 Object Lock enabled: two object copies are kept on Storage Nodes from day 0 to forever, using Ingest as the reference time. Rule definition

Example value

Rule name

Default compliant rule: Two Copies Two Data Centers

Tenant account

Not specified

711

Rule definition

Example value

Bucket name

Not specified

Advanced filter

Not specified

Rule definition

Example value

Reference time

Ingest time

Placements

From Day 0 to forever, keep two replicated copies—one on Storage Nodes in Data Center 1 and one on Storage Nodes in Data Center 2. Compliant ILM policy for S3 Object Lock example

To create an ILM policy that will effectively protect all objects in your system, including those in buckets with S3 Object Lock enabled, you must select ILM rules that satisfy the storage requirements for all objects. Then, you must simulate and activate the policy. Add rules to the policy

In this example, the ILM policy includes three ILM rules, in the following order:

1. A compliant rule that uses erasure coding to protect objects greater than 1 MB in a specific bucket with S3 Object Lock enabled. The objects are stored on Storage Nodes from day 0 to forever.

2. A non-compliant rule that creates two replicated object copies on Storage Nodes for a year and then moves one object copy to a Cloud Storage Pool forever. This rule does not apply to buckets with S3 Object Lock enabled because it uses a Cloud Storage Pool.

3. The default compliant rule that creates two replicated object copies on Storage Nodes from day 0 to forever.