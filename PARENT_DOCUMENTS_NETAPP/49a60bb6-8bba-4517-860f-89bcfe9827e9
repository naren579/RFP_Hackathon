671

4. Optionally, in the Reason for change field, enter the reason you are creating a new policy.

5. To add rules to the policy, select Select rules. Select a rule name to view the settings for that rule.

If you are cloning a policy:

The rules used by the policy you are cloning are selected. ◦ If the policy you are cloning used any rules with no filters that were not the default rule, you are prompted to remove all but one of those rules.

If the default rule used a filter, you are prompted to select a new default rule. ◦ If the default rule was not the last rule, you can move the rule to the end of the new policy.

S3 Object Lock not enabled

a. Select one default rule for the policy. To create a new default rule, select ILM rules page.

The default rule applies to any objects that don’t match another rule in the policy. The default rule can’t use any filters and is always evaluated last. Don’t use the Make 2 Copies rule as the default rule for a policy. The Make 2 Copies rule uses a single storage pool, All Storage Nodes, which contains all sites. If your StorageGRID system has more than one site, two copies of an object might be placed on the same site. S3 Object Lock enabled

a. Select one default rule for the policy. To create a new default rule, select ILM rules page.

The list of rules contains only the rules that are compliant and don’t use any filters.

Don’t use the Make 2 Copies rule as the default rule for a policy. The Make 2 Copies rule uses a single storage pool, All Storage Nodes, which contains all sites. If you use this rule, multiple copies of an object might be placed on the same site.

b. If you need a different "default" rule for objects in non-compliant S3 buckets, select Include a rule without filters for non-compliant S3 buckets, and select one non-compliant rule that does not use a filter.

For example, you might want to use a Cloud Storage Pool to store objects in buckets that don’t have S3 Object Lock enabled.

You can only select one non-compliant rule that does not use a filter. See also Example 7: Compliant ILM policy for S3 Object Lock.

6. When you are done selecting the default rule, select Continue.

7. For the Other rules step, select any other rules you want to add to the policy. These rules use at least one filter (tenant account, bucket name, advanced filter, or the Noncurrent reference time). Then select Select.

The Create a policy window now lists the rules you selected. The default rule is at the end, with the other

672

rules above it.

If S3 Object Lock is enabled and you also selected a non-compliant "default" rule, that rule is added as the second-to-last rule in the policy.

A warning appears if any rule does not retain objects forever. When you activate this policy, you must confirm that you want StorageGRID to delete objects when the placement instructions for the default rule elapse (unless a bucket lifecycle keeps the objects for a longer time period). 8. Drag the rows for the non-default rules to determine the order in which these rules will be evaluated.

You can’t move the default rule. If S3 Object Lock is enabled, you also can’t move the non-compliant "default" rule if one was selected.

You must confirm that the ILM rules are in the correct order. When the policy is activated, new and existing objects are evaluated by the rules in the order listed, starting at the top.

9. As required, select Select rules to add or remove rules.

10. When you are done, select Save.

11. Repeat these steps to create additional ILM policies. The Create a policy window now lists the rules you selected. The default rule is at the end, with the other

672

rules above it.

If S3 Object Lock is enabled and you also selected a non-compliant "default" rule, that rule is added as the second-to-last rule in the policy.

A warning appears if any rule does not retain objects forever. When you activate this policy, you must confirm that you want StorageGRID to delete objects when the placement instructions for the default rule elapse (unless a bucket lifecycle keeps the objects for a longer time period). 8. Drag the rows for the non-default rules to determine the order in which these rules will be evaluated.

You can’t move the default rule. If S3 Object Lock is enabled, you also can’t move the non-compliant "default" rule if one was selected.

You must confirm that the ILM rules are in the correct order. When the policy is activated, new and existing objects are evaluated by the rules in the order listed, starting at the top.

9. As required, select Select rules to add or remove rules.

10. When you are done, select Save.

11. Repeat these steps to create additional ILM policies.

12. Simulate an ILM policy. You should always simulate a policy before activating it to ensure it works as expected.

Simulate a policy

Simulate a policy on test objects before activating the policy and applying it to your production data.

Before you begin