An ILM rule that creates only one replicated copy for any time period puts data at risk of permanent loss. If only one replicated copy of an object exists, that object is lost if a Storage Node fails or has a significant error. You also temporarily lose access to the object during maintenance procedures such as upgrades. If you need to remove FabricPool data from StorageGRID, use ONTAP to retrieve all data for the FabricPool volume and promote it to the performance tier.

To avoid data loss, do not use an ILM rule that will expire or delete FabricPool cloud tier data. Set the retention period in each ILM rule to forever to ensure that FabricPool objects aren’t deleted by StorageGRID ILM.

Don’t create rules that will move FabricPool cloud tier data out of the bucket to another location. You can’t use a Cloud Storage Pool to move FabricPool data to another object store. Similarly, you can’t archive FabricPool data to tape using an Archive Node.

Using Cloud Storage Pools with FabricPool is not supported because of the added latency to retrieve an object from the Cloud Storage Pool target. Starting with ONTAP 9.8, you can optionally create object tags to help classify and sort tiered data for easier management. For example, you can set tags only on FabricPool volumes attached to StorageGRID. Then, when you create ILM rules in StorageGRID, you can use the Object Tag advanced filter to select and place this data. Other best practices for StorageGRID and FabricPool

When configuring a StorageGRID system for use with FabricPool, you might need to change other StorageGRID options. Before changing a global setting, consider how the change will affect other S3 applications.

752

Audit message and log destinations

FabricPool workloads often have a high rate of read operations, which can generate a high volume of audit messages.

If you don’t require a record of client read operations for FabricPool or any other S3 application, optionally go to CONFIGURATION > Monitoring > Audit and syslog server. Change the Client Reads setting to Error to decrease the number of audit messages recorded in the audit log. See Configure audit messages and log destinations for details. If you have a large grid, use multiple types of S3 applications, or want to retain all audit data, configure an external syslog server and save audit information remotely. Using an external server minimizes the performance impact of audit message logging without reducing the completeness of of audit data. See Considerations for external syslog server for details. Object encryption When configuring a StorageGRID system for use with FabricPool, you might need to change other StorageGRID options. Before changing a global setting, consider how the change will affect other S3 applications.

752

Audit message and log destinations

FabricPool workloads often have a high rate of read operations, which can generate a high volume of audit messages.

If you don’t require a record of client read operations for FabricPool or any other S3 application, optionally go to CONFIGURATION > Monitoring > Audit and syslog server. Change the Client Reads setting to Error to decrease the number of audit messages recorded in the audit log. See Configure audit messages and log destinations for details. If you have a large grid, use multiple types of S3 applications, or want to retain all audit data, configure an external syslog server and save audit information remotely. Using an external server minimizes the performance impact of audit message logging without reducing the completeness of of audit data. See Considerations for external syslog server for details. Object encryption

When configuring StorageGRID, you can optionally enable the global option for stored object encryption if data encryption is required for other StorageGRID clients. The data that is tiered from FabricPool to StorageGRID is already encrypted, so enabling the StorageGRID setting is not required. Client-side encryption keys are owned by ONTAP. Object compression

When configuring StorageGRID, don’t enable the global option to compress stored objects. The data that is tiered from FabricPool to StorageGRID is already compressed. Using the StorageGRID option will not further reduce an object’s size. Bucket consistency

For FabricPool buckets, the recommended bucket consistency is Read-after-new-write, which is the default consistency for a new bucket. Don’t edit FabricPool buckets to use Available or Strong-site.

FabricPool tiering

If a StorageGRID node uses storage assigned from a NetApp ONTAP system, confirm that the volume does not have a FabricPool tiering policy enabled. For example, if a StorageGRID node is running on a VMware host, ensure the volume backing the datastore for the StorageGRID node does not have a FabricPool tiering policy enabled. Disabling FabricPool tiering for volumes used with StorageGRID nodes simplifies troubleshooting and storage operations.