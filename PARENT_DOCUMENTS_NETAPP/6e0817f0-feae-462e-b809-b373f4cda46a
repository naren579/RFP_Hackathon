When you configure the KMS in StorageGRID, you must enter the same FQDNs or IP addresses in the Hostname field.

The server certificate must match the certificate used by the KMIP interface of the KMS, which typically uses port 5696.

5. Obtain the public client certificate issued to StorageGRID by the external KMS and the private key for the client certificate. The client certificate allows StorageGRID to authenticate itself to the KMS.

Add a key management server (KMS)

You use the StorageGRID Key Management Server wizard to add each KMS or KMS cluster.

Before you begin

You have reviewed the considerations and requirements for using a key management server.

You have configured StorageGRID as a client in the KMS, and you have the required information for each KMS or KMS cluster.

You are signed in to the Grid Manager using a supported web browser.

You have the Root access permission. About this task

If possible, configure any site-specific key management servers before configuring a default KMS that applies to all sites not managed by another KMS. If you create the default KMS first, all node-encrypted appliances in the grid will be encrypted by the default KMS. If you want to create a site-specific KMS later, you must first copy the current version of the encryption key from the default KMS to the new KMS. See Considerations for changing the KMS for a site for details. Step 1: KMS details

In Step 1 (KMS details) of the Add a Key Management Server wizard, you provide details about the KMS or KMS cluster.

Steps

1. Select CONFIGURATION > Security > Key management server.

The Key management server page appears with the Configuration details tab selected.

2. Select Create.

Step 1 (KMS details) of the Add a Key Management Server wizard appears.

436

3. Enter the following information for the KMS and the StorageGRID client you configured in that KMS. Field

Description

KMS name

A descriptive name to help you identify this KMS. Must be between 1 and 64 characters.

Key name

The exact key alias for the StorageGRID client in the KMS. Must be between 1 and 255 characters.

Note: If you haven’t created a key using your KMS product, you’ll be prompted to have StorageGRID create the key. Manages keys for

The StorageGRID site that will be associated with this KMS. If possible, you should configure any site-specific key management servers before configuring a default KMS that applies to all sites not managed by another KMS.

Select a site if this KMS will manage encryption keys for the appliance nodes at a specific site.

Select Sites not managed by another KMS (default KMS) to configure a default KMS that will apply to any sites that don’t have a dedicated KMS and to any sites you add in subsequent expansions.

Note: A validation error will occur when you save the KMS configuration if you select a site that was previously encrypted by the default KMS but you did not provide the current version of original encryption key to the new KMS. Port

The port the KMS server uses for Key Management Interoperability Protocol (KMIP) communications. Defaults to 5696, which is the KMIP standard port.

Hostname

The fully qualified domain name or IP address for the KMS. Key name

The exact key alias for the StorageGRID client in the KMS. Must be between 1 and 255 characters.

Note: If you haven’t created a key using your KMS product, you’ll be prompted to have StorageGRID create the key. Manages keys for

The StorageGRID site that will be associated with this KMS. If possible, you should configure any site-specific key management servers before configuring a default KMS that applies to all sites not managed by another KMS.

Select a site if this KMS will manage encryption keys for the appliance nodes at a specific site.

Select Sites not managed by another KMS (default KMS) to configure a default KMS that will apply to any sites that don’t have a dedicated KMS and to any sites you add in subsequent expansions.

Note: A validation error will occur when you save the KMS configuration if you select a site that was previously encrypted by the default KMS but you did not provide the current version of original encryption key to the new KMS. Port

The port the KMS server uses for Key Management Interoperability Protocol (KMIP) communications. Defaults to 5696, which is the KMIP standard port.

Hostname

The fully qualified domain name or IP address for the KMS.

Note: The Subject Alternative Name (SAN) field of the server certificate must include the FQDN or IP address you enter here. Otherwise, StorageGRID will not be able to connect to the KMS or to all servers in a KMS cluster.

4. If you are configuring a KMS cluster, select Add another hostname to add a hostname for each server in the cluster.

5. Select Continue. Step 2: Upload server certificate