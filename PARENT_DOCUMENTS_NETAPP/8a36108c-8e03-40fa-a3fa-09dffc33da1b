arn:aws:es:region:account- ID:domain/mydomain/myindex/mytype

urn:mysite:es:::mydomain/myindex/myty pe

The endpoint must be configured before the configuration XML is submitted, or configuration will fail with a 404 error.

URN is included in the Destination element.

Use the sample metadata notification configuration XML to learn how to construct your own XML.

Metadata notification configuration that applies to all objects 858

Required

Yes

Yes

No

Yes

Name

Description

Prefix

Objects that match the prefix are affected by the rule, and their metadata is sent to the specified destination.

To match all objects, specify an empty prefix.

Included in the Rule element. Destination

Container tag for the destination of a rule.

Included in the Rule element.

Urn

URN of the destination where object metadata is sent. Must be the URN of a StorageGRID endpoint with the following properties:

es must be the third element.

The URN must end with the index and type where the metadata is stored, in the form domain- name/myindex/mytype.

Endpoints are configured using the Tenant Manager or Tenant Management API. They take the following form:

arn:aws:es:region:account- ID:domain/mydomain/myindex/mytype

urn:mysite:es:::mydomain/myindex/myty pe

The endpoint must be configured before the configuration XML is submitted, or configuration will fail with a 404 error.

URN is included in the Destination element.

Use the sample metadata notification configuration XML to learn how to construct your own XML.

Metadata notification configuration that applies to all objects

In this example, object metadata for all objects is sent to the same destination.

Required Yes

Yes

Yes

859

<MetadataNotificationConfiguration> <Rule> <ID>Rule-1</ID> <Status>Enabled</Status> <Prefix></Prefix> <Destination> <Urn>urn:myes:es:::sgws-notifications/test1/all</Urn> </Destination> </Rule> </MetadataNotificationConfiguration>

Metadata notification configuration with two rules

In this example, object metadata for objects that match the prefix /images is sent to one destination, while object metadata for objects that match the prefix /videos is sent to a second destination.

<MetadataNotificationConfiguration> <Rule> <ID>Images-rule</ID> <Status>Enabled</Status> <Prefix>/images</Prefix> <Destination> <Urn>arn:aws:es:us-east-1:3333333:domain/es- domain/graphics/imagetype</Urn> </Destination> </Rule> <Rule> <ID>Videos-rule</ID> <Status>Enabled</Status> <Prefix>/videos</Prefix> <Destination> <Urn>arn:aws:es:us-west-1:22222222:domain/es- domain/graphics/videotype</Urn> </Destination> </Rule> </MetadataNotificationConfiguration>

Related information Use S3 REST API

Object metadata included in metadata notifications

JSON generated by search integration service

Configure search integration service

860

Configure the search integration service

The search integration service sends object metadata to a destination search index whenever an object is created, deleted, or its metadata or tags are updated.

Before you begin

Platform services were enabled for your tenant account by a StorageGRID administrator.

You have already created an S3 bucket whose contents you want to index.

The endpoint that you intend to use as a destination for the search integration service already exists, and you have its URN.

You belong to a user group that has the Manage all buckets or Root access permission. These permissions override the permission settings in group or bucket policies when configuring the bucket using the Tenant Manager. About this task

After you configure the search integration service for a source bucket, creating an object or updating an object’s metadata or tags triggers object metadata to be sent to the destination endpoint. If you enable the search integration service for a bucket that already contains objects, metadata notifications aren’t automatically sent for existing objects. You must update these existing objects to ensure that their metadata is added to the destination search index. Steps

1. Use a text editor to create the metadata notification XML required to enable search integration. Related information Use S3 REST API

Object metadata included in metadata notifications

JSON generated by search integration service

Configure search integration service

860

Configure the search integration service

The search integration service sends object metadata to a destination search index whenever an object is created, deleted, or its metadata or tags are updated.

Before you begin

Platform services were enabled for your tenant account by a StorageGRID administrator.

You have already created an S3 bucket whose contents you want to index.

The endpoint that you intend to use as a destination for the search integration service already exists, and you have its URN.