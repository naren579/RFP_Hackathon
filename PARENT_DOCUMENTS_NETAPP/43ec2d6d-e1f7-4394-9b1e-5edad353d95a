Before adding new storage volumes, use the Grid Manager to view the current object stores for each Storage Node as well as the corresponding mount points. You can use this information when adding storage volumes. Steps

1. Select NODES > site > Storage Node > Storage.

2. Scroll down to view the amounts of available storage for each volume and object store.

For appliance Storage Nodes, the Worldwide Name for each disk matches the volume world-wide identifier (WWID) that appears when you view standard volume properties in SANtricity OS (the management software connected to the appliance’s storage controller).

To help you interpret disk read and write statistics related to volume mount points, the first portion of the name shown in the Name column of the Disk Devices table (that is, sdc, sdd, sde, and so on) matches the value shown in the Device column of the Volumes table.

1403

1404

3. Follow the instructions for your platform to add new storage volumes to the Storage Node.

VMware: Add storage volumes to Storage Node ◦ Linux: Add direct-attached or SAN volumes to Storage Node

VMware: Add storage volumes to Storage Node If a Storage Node includes fewer than 16 storage volumes, you can increase its capacity by using VMware vSphere to add volumes.

Before you begin

You have access to the instructions for installing StorageGRID for VMware deployments.

Install StorageGRID on VMware

You have the Passwords.txt file.

You have specific access permissions.

Don’t attempt to add storage volumes to a Storage Node while a software upgrade, recovery procedure, or another expansion procedure is active. About this task

The Storage Node is unavailable for a brief time when you add storage volumes. You should perform this procedure on one Storage Node at a time to avoid impacting client-facing grid services.

Steps

1. If necessary, install new storage hardware and create new VMware datastores.

2. Add one or more hard disks to the virtual machine for use as storage (object stores). a. Open VMware vSphere Client.

b. Edit the virtual machine settings to add one or more additional hard disks.

The hard disks are typically configured as Virtual Machine Disks (VMDKs). VMDKs are more commonly used and are easier to manage, while RDMs might provide better performance for workloads that use larger object sizes (for example, greater than 100 MB). For more information about adding hard disks to virtual machines, see the VMware vSphere documentation.

3. Restart the virtual machine by using the Restart Guest OS option in the VMware vSphere Client, or by entering the following command in an ssh session to the virtual machine:sudo reboot

Don’t use Power Off or Reset to restart the virtual machine.

4. Configure the new storage for use by the Storage Node: a. Log in to the grid node:

i. Enter the following command: ssh admin@grid_node_IP

ii. Enter the password listed in the Passwords.txt file.

iii. Enter the following command to switch to root: su -

iv. Enter the password listed in the Passwords.txt file.

When you are logged in as root, the prompt changes from $ to #.

1405

b. Configure the new storage volumes: sudo add_rangedbs.rb

This script finds any new storage volumes and prompts you to format them.

c. Enter y to accept the formatting.

d. If any of the volumes have previously been formatted, decide if you want to reformat them.

▪ Enter y to reformat. ▪ Enter n to skip reformatting.

The setup_rangedbs.sh script runs automatically.

5. Check that the services start correctly:

a. View a list of the status of all services on the server: sudo storagegrid-status

The status is updated automatically.

b. Wait until all services are Running or Verified.

c. Exit the status screen:

Ctrl+C

6. Verify that the Storage Node is online:

a. Sign in to the Grid Manager using a supported web browser.

b. Select SUPPORT > Tools > Grid topology. c. Select site > Storage Node > LDR > Storage.

d. Select the Configuration tab and then the Main tab. iii. Enter the following command to switch to root: su -

iv. Enter the password listed in the Passwords.txt file.

When you are logged in as root, the prompt changes from $ to #.

1405

b. Configure the new storage volumes: sudo add_rangedbs.rb

This script finds any new storage volumes and prompts you to format them.

c. Enter y to accept the formatting.

d. If any of the volumes have previously been formatted, decide if you want to reformat them.

▪ Enter y to reformat. ▪ Enter n to skip reformatting.

The setup_rangedbs.sh script runs automatically.

5. Check that the services start correctly:

a. View a list of the status of all services on the server: sudo storagegrid-status

The status is updated automatically.

b. Wait until all services are Running or Verified.

c. Exit the status screen:

Ctrl+C

6. Verify that the Storage Node is online:

a. Sign in to the Grid Manager using a supported web browser.